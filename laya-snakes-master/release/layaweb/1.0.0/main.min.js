function onWindowResize(){game.stageW=Browser.onQQBrowser?Browser.width/Browser.pixelRatio:Browser.width/Browser.pixelRatio,game.stageH=Browser.onQQBrowser?Browser.height/Browser.pixelRatio:Browser.height/Browser.pixelRatio,Laya.stage.size(game.stageW,game.stageH),game._onresizeAction()}function distance(t,e,a,i){return Math.sqrt((t-a)*(t-a)+(e-i)*(e-i))}var __extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},Bean=function(t){function e(e,a,i){void 0===e&&(e=Math.random()*game.gameMainUI.map.width),void 0===a&&(a=Math.random()*game.gameMainUI.map.height),void 0===i&&(i=Math.floor(6*Math.random()+1)),t.call(this),this.haveEaten=!1,this.speed=2,this.eatenTargetPos={x:0,y:0},this.haveEatenDis=4,this.eatenPos={x:0,y:0},this.eatenInitPos={x:0,y:0},this.colorNum=i,this.zOrder=0,this.visible=!1,this.eatenInitPos.x=e,this.eatenInitPos.y=a,this.init(e,a)}return __extends(e,t),e.prototype.init=function(t,e){this.loadImage("images/bean"+this.colorNum+".png",0,0,0,0,new Handler(this,this.loaded,[t,e]))},e.prototype.loaded=function(t,e){this.zOrder=0,this.pivot(this.width/2,this.height/2),this.pos(t,e),this.visible=!0},e}(laya.display.Sprite),__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},View=laya.ui.View,Dialog=laya.ui.Dialog,ui;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.GameMainUI.uiView)},a.uiView={type:"View",props:{},child:[{type:"Image",props:{"var":"map",skin:"map/tile_map.png",pivotY:750,pivotX:1500}},{type:"Label",props:{y:10,x:10,text:"长度："}},{type:"Label",props:{y:10,x:44,"var":"text_length",text:"0"}},{type:"Label",props:{y:26,x:10,text:"击杀："}},{type:"Label",props:{y:26,x:44,"var":"text_kill",text:"0"}},{type:"Image",props:{y:10,x:489,width:102,"var":"mask_rank",skin:"images/mask.png",height:133}},{type:"Button",props:{y:321,x:511,"var":"ctrl_flash",stateNum:"2",skin:"images/control-flash.png",pivotY:40,pivotX:40}},{type:"Image",props:{y:329,x:85,"var":"ctrl_back",skin:"images/control-back.png",pivotY:40,pivotX:40},child:[{type:"Image",props:{y:40,x:40,"var":"ctrl_rocker",skin:"images/control-rocker.png",pivotY:17.5,pivotX:17.5}}]},{type:"Image",props:{y:357,x:-32,visible:!1,"var":"ctrl_rocker_move",skin:"images/control-rocker.png",pivotY:17.5,pivotX:17.5}}]},a}(View);t.GameMainUI=e}(ui||(ui={}));var ui;!function(t){var e=function(e){function a(){e.call(this)}return __extends(a,e),a.prototype.createChildren=function(){e.prototype.createChildren.call(this),this.createView(t.GameStartUI.uiView)},a.uiView={type:"View",props:{skin:"images/head2.png"},child:[{type:"Image",props:{"var":"background",skin:"images/s1-background.jpg",pivotY:297,pivotX:594,name:"background"},child:[{type:"Image",props:{y:204.5,x:394.5,width:399,skin:"images/s1-option-background.png",name:"option_background",height:211},child:[{type:"RadioGroup",props:{y:50,x:51,"var":"skinRadio",space:-3,skin:"images/s1-radio.png",selectedIndex:0,labels:"  红色,  蓝色,  绿色,  紫色,  棕色",labelPadding:"4",direction:"vertical"}},{type:"Image",props:{y:54,x:133,width:12,skin:"images/head1.png",rotation:90,height:12}},{type:"Image",props:{y:75,x:133,width:12,skin:"images/head2.png",rotation:90,height:12}},{type:"Image",props:{y:97,x:133,width:12,skin:"images/head3.png",rotation:90,height:12}},{type:"Image",props:{y:118,x:133,width:12,skin:"images/head4.png",rotation:90,height:12}},{type:"Image",props:{y:139,x:133,width:12,skin:"images/head5.png",rotation:90,height:12}},{type:"Button",props:{y:14,x:234,"var":"btn_single",stateNum:"1",skin:"images/s1-btn1.png",labelPadding:"-20",labelBold:!0,label:"单人模式"}},{type:"Button",props:{y:113,x:234,"var":"btn_net",stateNum:"1",skin:"images/s1-btn2.png",labelPadding:"-20",labelBold:!0,label:"多人模式"}},{type:"Button",props:{y:13,x:46,width:126,"var":"nickname",stateNum:"1",skin:"images/s1-input.png",label:"昵称",height:24}},{type:"Button",props:{y:166,x:46,width:126,"var":"neturl",stateNum:"1",skin:"images/s1-input.png",label:"192.168.1.60",height:24}},{type:"Label",props:{y:-31,x:139.5,text:"贪吃蛇小作战",fontSize:20,font:"Microsoft Yahei",color:"#226eaa",bold:!0}},{type:"TextInput",props:{y:190.5,x:161.5,text:"TextInput",skin:"comp/textinput.png"}}]}]}]},a}(View);t.GameStartUI=e}(ui||(ui={}));var __extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},GameMain=function(t){function e(){t.call(this),this.keySpaceDown=!1,this.init()}return __extends(e,t),e.prototype.init=function(){this.ctrl_flash.on("mousedown",this.ctrl_flash,this.ctrlFlashDown),this.ctrl_flash.on("mouseup",this.ctrl_flash,this.ctrlFlashUp),Laya.stage.on("mouseup",this,this.ctrlRockerUp),Laya.stage.on("mousemove",this,this.ctrlRockerDown),Laya.stage.on("keydown",this,this.keyDown),Laya.stage.on("keyup",this,this.keyUp)},e.prototype.keyUp=function(t){32==t.keyCode&&this.ctrlFlashUp()},e.prototype.keyDown=function(t){32==t.keyCode&&this.ctrlFlashDown()},e.prototype.ctrlFlashDown=function(){game.snakeSelf.speedNow="fast"},e.prototype.ctrlFlashUp=function(){game.snakeSelf.speedNow="slow"},e.prototype.ctrlRockerUp=function(){Laya.stage.mouseX<=game.stageW/1.5&&(this.ctrl_rocker.visible=!0,this.ctrl_rocker_move.visible=!1)},e.prototype.ctrlRockerDown=function(){Laya.stage.mouseX<=game.stageW/1.5&&(this.ctrl_rocker.visible=!1,this.ctrl_rocker_move.visible=!0,distance(Laya.stage.mouseX,Laya.stage.mouseY,this.ctrl_back.x,this.ctrl_back.y)<=this.ctrl_back.width/2-this.ctrl_rocker.width/2?this.ctrl_rocker_move.pos(Laya.stage.mouseX,Laya.stage.mouseY):this.ctrl_rocker_move.pos(this.ctrl_back.x+(this.ctrl_back.width/2-this.ctrl_rocker.width/2)*Math.cos(Math.atan2(Laya.stage.mouseY-this.ctrl_back.y,Laya.stage.mouseX-this.ctrl_back.x)),this.ctrl_back.y+(this.ctrl_back.width/2-this.ctrl_rocker.width/2)*Math.sin(Math.atan2(Laya.stage.mouseY-this.ctrl_back.y,Laya.stage.mouseX-this.ctrl_back.x))),game.snakeSelf.targetR=180*Math.atan2(Laya.stage.mouseY-this.ctrl_back.y,Laya.stage.mouseX-this.ctrl_back.x)/Math.PI)},e}(ui.GameMainUI),__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},GameStart=function(t){function e(){t.call(this),this.init()}return __extends(e,t),e.prototype.init=function(){this.nickname.label="游客"+Math.floor(9999*Math.random()+1),this.skinRadio.selectedIndex=Math.floor(5*Math.random()+0),this.neturl.label="192.168.1.60",LocalStorage.getItem("nickname")&&(this.nickname.label=LocalStorage.getItem("nickname")),LocalStorage.getItem("neturl")&&(this.neturl.label=LocalStorage.getItem("neturl")),LocalStorage.getItem("skin")&&(this.skinRadio.selectedIndex=parseInt(LocalStorage.getItem("skin"))),this.nickname.on("click",this,this.changeNickName),this.neturl.on("click",this,this.changeNetUrl),this.skinRadio.on("click",this,this.onSelectSkin)},e.prototype.changeNickName=function(){var t=window.prompt("请输入您的昵称！",this.nickname.label);null!=t&&""!=t?this.nickname.label=t:Browser.window.alert("请输入昵称！")},e.prototype.changeNetUrl=function(){var t=window.prompt("请输入服务器地址！",this.neturl.label);null!=t&&""!=t?this.neturl.label=t:Browser.window.alert("请输入服务器地址！")},e.prototype.onSelectSkin=function(){},e}(ui.GameStartUI),__extends=this&&this.__extends||function(t,e){function a(){this.constructor=t}for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);t.prototype=null===e?Object.create(e):(a.prototype=e.prototype,new a)},Snake=function(t){function e(e,a,i){void 0===e&&(e=Math.floor(5*Math.random()+1)),void 0===a&&(a=game.gameMainUI.map.width/2),void 0===i&&(i=game.gameMainUI.map.height/2),t.call(this),this.speedObj={slow:2,fast:4,rotation:10},this.speedNow="slow",this.snakeInitSize=.45,this.snakeLength=24,this.kill=0,this.bodyArr=[],this.pathArr=[],this.eatBean=0,this.bodyBeanNum=6,this.bodyMaxNum=500,this.initWidth=40,this.AI=!1,this.speed=this.speedObj[this.speedNow],this.targetR=this.rotation,this.colorNum=e,this.visible=!1,this.snakeSize=this.snakeInitSize,this.loadImage("images/head"+this.colorNum+".png",0,0,0,0,new Handler(this,this.loaded,[a,i]))}return __extends(e,t),e.prototype.loaded=function(t,e){this.zOrder=11e3,this.initWidth=this.width,this.rotationTemp=this.rotation,this.snakeScale(this),this.pivot(this.width/2,this.height/2),this.pos(t,e),this.visible=!0,this.bodySpace=Math.floor(this.width/10*8);for(var a=1;a<=this.getBodyNum();a++)this.addBody(this.x-a*this.bodySpace,this.y,this.rotation);for(var a=0;a<this.bodySpace*this.getBodyNum();a++)this.pathArr.push({x:this.x-a,y:this.y})},e.prototype.move=function(){this.bodySpace=Math.floor(this.width/10*8),this.headMove(),this.bodyMove(),this.speedChange(),this.rotationChange(),this.bodyCheck()},e.prototype.moveOut=function(){},e.prototype.headMove=function(){var t=this.speed*Math.cos(this.rotation*Math.PI/180),e=this.speed*Math.sin(this.rotation*Math.PI/180);this.rotation=this.rotationTemp;var a={x:this.x,y:this.y},i={x:this.x,y:this.y};this.x+t>=game.gameMainUI.map.width-this.width/2||this.x+t<=this.width/2?this.moveOut():(this.x+=t,a.x=this.x),this.y+e>=game.gameMainUI.map.height-this.width/2||this.y+e<=this.width/2?this.moveOut():(this.y+=e,a.y=this.y);for(var s=1;s<=this.speed;s++)this.pathArr.unshift({x:s*Math.cos(Math.atan2(a.y-i.y,a.x-i.x))+i.x,y:s*Math.sin(Math.atan2(a.y-i.y,a.x-i.x))+i.y})},e.prototype.bodyMove=function(){for(var t=0;t<this.bodyArr.length;t++){var e=this.bodyArr[t];this.pathArr[(t+1)*this.bodySpace]&&(e.rotation=Math.atan2(this.pathArr[(t+1)*this.bodySpace].y-e.y,this.pathArr[(t+1)*this.bodySpace].x-e.x)/Math.PI*180,e.pos(this.pathArr[(t+1)*this.bodySpace].x,this.pathArr[(t+1)*this.bodySpace].y)),this.pathArr.length>this.bodyArr.length*(1+this.bodySpace)&&this.pathArr.pop()}},e.prototype.snakeScale=function(t,e){void 0===e&&(e="head");var a=t.x,i=t.y;t.zOrder;t.pivot(t.width/2,t.height/2),t.graphics.clear(),t.loadImage("images/"+e+this.colorNum+".png",0,0,this.initWidth*this.snakeSize,this.initWidth*this.snakeSize),t.pivot(t.width/2,t.height/2),t.pos(a,i),this.speedObj.rotation=4/this.snakeSize},e.prototype.speedChange=function(){this.speed="slow"==this.speedNow?this.speed>this.speedObj[this.speedNow]?this.speed-1:this.speedObj[this.speedNow]:this.speed<this.speedObj[this.speedNow]?this.speed+1:this.speedObj[this.speedNow]},e.prototype.rotationChange=function(){var t=Math.abs(this.targetR-this.rotationTemp)<this.speedObj.rotation?Math.abs(this.targetR-this.rotationTemp):this.speedObj.rotation;this.targetR<-0&&this.rotationTemp>0&&Math.abs(this.targetR)+this.rotationTemp>180?(t=180-this.rotationTemp+(180+this.targetR)<this.speedObj.rotation?180-this.rotationTemp+(180+this.targetR):this.speedObj.rotation,this.rotationTemp+=t):this.rotationTemp+=this.targetR>this.rotationTemp&&Math.abs(this.targetR-this.rotationTemp)<=180?t:-t,this.rotationTemp=Math.abs(this.rotationTemp)>180?this.rotationTemp>0?this.rotationTemp-360:this.rotationTemp+360:this.rotationTemp},e.prototype.addBody=function(t,e,a){var i=this,s=new Sprite,o=this.zOrder-this.bodyArr.length-1;s.visible=!1,s.alpha=0,s.zOrder=o,s.loadImage("images/body"+this.colorNum+".png",0,0,0,0,new Handler(this,function(){i.snakeScale(s,"body"),s.pos(t,e),s.rotation=a,game.gameMainUI.map.addChild(s),s.visible=!0,s.alpha=1})),this.bodyArr.push(s)},e.prototype.bodyCheck=function(){var t=this;if(this.eatBean>=this.bodyBeanNum&&this.bodyArr.length<this.bodyMaxNum){for(var e=Math.floor(this.eatBean/this.bodyBeanNum),a=(this.bodyArr[this.bodyArr.length-1].x,this.bodyArr[this.bodyArr.length-1].y,this.bodyArr[this.bodyArr.length-1].rotation),i=0;e>i;i++)this.addBody(this.bodySpace*Math.cos(a*Math.PI/180),this.bodySpace*Math.sin(a*Math.PI/180),a);for(var i=0;i<this.bodySpace*e;i++)this.pathArr.push({x:this.x-i*Math.cos(a*Math.PI/180),y:this.y-i*Math.sin(a*Math.PI/180)});this.eatBean=this.eatBean%this.bodyBeanNum,this.snakeSize<1?(this.snakeSize=this.snakeInitSize+(1-this.snakeInitSize)/this.bodyMaxNum*this.bodyArr.length,this.bodyArr.forEach(function(e){t.snakeScale(e,"body")}),this.snakeScale(this)):this.snakeSize=1}},e.prototype.getBodyNum=function(){return Math.floor(this.snakeLength/this.bodyBeanNum)},e.prototype.reverseRotation=function(){this.targetR=this.rotation>0?this.rotation-180:this.rotation+180},e}(laya.display.Sprite),Sprite=laya.display.Sprite,Loader=laya.net.Loader,Texture=laya.resource.Texture,Handler=laya.utils.Handler,Browser=laya.utils.Browser,TiledMap=laya.map.TiledMap,Rectangle=laya.maths.Rectangle,Stat=laya.utils.Stat,TextFiled=laya.display.Text,LocalStorage=laya.net.LocalStorage,Game=function(){function t(){this.stageW=Browser.onQQBrowser?Browser.width/Browser.pixelRatio:Browser.clientWidth,this.stageH=Browser.onQQBrowser?Browser.height/Browser.pixelRatio:Browser.clientHeight,this.beanSingleNumInit=300,this.beanMaxNum=600,this.beanNum=0,this.beanOrder=0,this.beans={},this.SnakeAINum=5,this.snakeAIArr=[],this._init(),Stat.show(200,10)}return t.prototype._init=function(){this.stageW=600,this.stageH=Browser.height/Browser.width*this.stageW,Laya.init(this.stageW,this.stageH,Laya.WebGL),Laya.stage.scaleMode=Laya.Stage.SCALE_SHOWALL,Laya.stage.alignH=Laya.Stage.ALIGN_CENTER,Laya.stage.alignV=Laya.Stage.ALIGN_MIDDLE,Laya.stage.screenMode=Laya.Stage.SCREEN_HORIZONTAL,Laya.stage.bgColor="#555555",this._load(),Browser.window.onresize=onWindowResize},t.prototype._onresizeAction=function(){this.loading&&this.loading.pos(this.stageW/2,this.stageH/2),this.gameStartUI&&this.gameStartUI.pos(this.stageW/2,this.stageH/2),this.gameMainUI&&(this.gameMainUI.mask_rank.x=this.stageW-this.gameMainUI.mask_rank.width-10),this.gameMainUI&&this.gameMainUI.ctrl_flash.pos(this.stageW-this.gameMainUI.ctrl_flash.width,this.stageH-this.gameMainUI.ctrl_flash.height),this.gameMainUI&&this.gameMainUI.ctrl_back.pos(this.gameMainUI.ctrl_back.width,this.stageH-this.gameMainUI.ctrl_back.height)},t.prototype._load=function(){var t=this;this.loading=new TextFiled,this.loading.text="正在加载资源，请稍后...",this.loading.color="#000000",this.loading.font="Microsoft YaHei",this.loading.pos(this.stageW/2,this.stageH/2),this.loading.pivot(this.loading.width/2,this.loading.height/2),Laya.stage.addChild(this.loading),Laya.loader.load("res/atlas/images.json",Laya.Handler.create(this,function(){t.gameMain()}),null,Laya.Loader.ATLAS),Laya.loader.load("map/tile_map.png"),Laya.loader.load("images/head1.png"),Laya.loader.load("images/head2.png"),Laya.loader.load("images/head3.png"),Laya.loader.load("images/head4.png"),Laya.loader.load("images/head5.png")},t.prototype.gameStartSence=function(){this.gameStartUI=new GameStart,this.gameStartUI.pos(this.stageW/2,this.stageH/2),this.gameStartUI.btn_single.on("click",this,this.gameStart,[0]),this.gameStartUI.btn_net.on("click",this,this.gameStart,[1]),Laya.stage.addChild(this.gameStartUI),Laya.stage.removeChild(this.loading),this.loading.destroy()},t.prototype.gameStart=function(t){this.nickname=this.gameStartUI.nickname.label,this.neturl=this.gameStartUI.neturl.label,this.skin=this.gameStartUI.skinRadio.selectedIndex,this.gameMode=t,Laya.stage.removeChild(this.gameStartUI),this.gameMain()},t.prototype.gameMain=function(){this.gameMainUI=new GameMain,this.gameMainUI.map.pos(this.stageW/2,this.stageH/2),this.gameMainUI.mask_rank.x=this.stageW-this.gameMainUI.mask_rank.width-10,this.gameMainUI.ctrl_flash.pos(this.stageW-this.gameMainUI.ctrl_flash.width-30,this.stageH-this.gameMainUI.ctrl_flash.height),this.gameMainUI.ctrl_back.pos(this.gameMainUI.ctrl_back.width+30,this.stageH-this.gameMainUI.ctrl_back.height),Laya.stage.addChild(this.gameMainUI);for(var t=0;t<this.beanSingleNumInit;t++)this.beanOrder++,this.addBean(this.beanOrder);this.addBeanRandom(),this.snakeSelf=new Snake,this.gameMainUI.map.addChild(this.snakeSelf);for(var e=0;e<this.SnakeAINum;e++){var a=new Snake(Math.floor(5*Math.random()+1),this.gameMainUI.map.width*Math.random(),this.gameMainUI.map.height*Math.random());a.AI=!0,this.snakeAIArr.push(a),this.gameMainUI.map.addChild(a)}this.snakeAIRotation(),Laya.timer.frameLoop(1,this,this.gameLoop)},t.prototype.gameLoop=function(){this.snakeSelf.move(),this.snakeAIMove(),this.mapMove(),this.eateBean(),this.gameMainUI.text_length.text=this.snakeSelf.snakeLength+""},t.prototype.eateBean=function(){for(var t in this.beans){var e=this.beans[t];distance(e.x,e.y,this.snakeSelf.x,this.snakeSelf.y)<=this.snakeSelf.width/2?(e.destroy(),this.beans[t]=void 0,delete this.beans[t],this.snakeSelf.snakeLength++,this.snakeSelf.eatBean++,this.beanNum--):distance(e.x,e.y,this.snakeSelf.x,this.snakeSelf.y)<=this.snakeSelf.width/2+20&&(e.x+=(this.snakeSelf.speed+.1)*Math.cos(Math.atan2(this.snakeSelf.y-e.y,this.snakeSelf.x-e.x)),e.y+=(this.snakeSelf.speed+.1)*Math.sin(Math.atan2(this.snakeSelf.y-e.y,this.snakeSelf.x-e.x)));for(var a=0;a<this.snakeAIArr.length;a++){var i=this.snakeAIArr[a];distance(e.x,e.y,i.x,i.y)<=i.width/2?(e.destroy(),this.beans[t]=void 0,delete this.beans[t],i.snakeLength++,i.eatBean++,this.beanNum--):distance(e.x,e.y,i.x,i.y)<=i.width/2+20&&(e.x+=e.speed*Math.cos(Math.atan2(i.y-e.y,i.x-e.x)),e.y+=e.speed*Math.sin(Math.atan2(i.y-e.y,i.x-e.x)))}}},t.prototype.mapMove=function(){var t=this.snakeSelf.snakeInitSize/this.snakeSelf.snakeSize<.7?.7:this.snakeSelf.snakeInitSize/this.snakeSelf.snakeSize;this.gameMainUI.map.x=-1*(this.snakeSelf.x+this.snakeSelf.width/2-this.gameMainUI.map.width/2)*t+this.stageW/2,this.gameMainUI.map.y=-1*(this.snakeSelf.y+this.snakeSelf.height/2-this.gameMainUI.map.height/2)*t+this.stageH/2,this.gameMainUI.map.scale(t,t)},t.prototype.addBean=function(t,e,a,i){var s=new Bean(e,a,i);s.orderNum=t,this.beans[t]=s,this.gameMainUI.map.addChild(s),this.beanNum++},t.prototype.addBeanRandom=function(){var t=this;this.beanRandomTimer=setInterval(function(){if(t.beanNum<t.beanMaxNum)for(var e=0;20>e;e++)t.beanOrder++,t.addBean(t.beanOrder)},100)},t.prototype.snakeAIMove=function(){for(var t=0;t<this.snakeAIArr.length;t++){var e=this.snakeAIArr[t];e.move();var a=90/e.speedObj.rotation*e.speed+e.width/2,i={x:0,y:0};i.x=a*Math.cos(e.rotation*Math.PI/180)+e.x,i.y=a*Math.sin(e.rotation*Math.PI/180)+e.y;var s=!1;(i.x>=this.gameMainUI.map.width-e.width/2||i.x<=e.width/2||i.y>=this.gameMainUI.map.height-e.width/2||i.y<=e.width/2)&&e.reverseRotation(),distance(i.x,i.y,this.snakeSelf.x,this.snakeSelf.y)<=this.snakeSelf.width&&(e.reverseRotation(),s=!0);for(var o=0;o<this.snakeSelf.bodyArr.length&&!s;o++){var h=this.snakeSelf.bodyArr[o];distance(i.x,i.y,h.x,h.y)<=h.width&&(e.reverseRotation(),s=!0)}for(var n=0;n<this.snakeAIArr.length&&!s;n++){var r=this.snakeAIArr[n];if(t!=n){distance(i.x,i.y,r.x,r.y)<=r.width&&(e.reverseRotation(),s=!0);for(var p=0;p<r.bodyArr.length&&!s;p++){var h=r.bodyArr[p];distance(i.x,i.y,h.x,h.y)<=h.width&&(e.reverseRotation(),s=!0)}}}}},t.prototype.snakeAIRotation=function(){for(var t=this,e=0;e<this.snakeAIArr.length;e++)this.snakeAIArr[e].targetR=180-360*Math.random(),this.snakeAIArr[e].speedNow=Math.random()>.9?"fast":"slow";setInterval(function(){for(var e=0;e<t.snakeAIArr.length;e++)t.snakeAIArr[e].targetR=180-360*Math.random(),t.snakeAIArr[e].speedNow=Math.random()>.9?"fast":"slow"},3e3)},t}(),game=new Game;